# AI简历初筛系统（真实LLM版本）

这是一个完整的AI简历初筛系统，使用真实的LLM进行智能筛选，包含前端界面和后端服务。

## 📋 系统架构

```
前端界面 (index.html)
    ↓
后端服务 (backend.py:8000)
    ↓ 解析Excel → JSON
    ↓ 直接调用 LLM 筛选模块
    ↓ (7.LLM_resume_filter/core/screener.py)
    ↓ 真实AI筛选
返回结果
```

## 🎯 功能说明

1. **前端上传功能**：支持上传两个Excel文件
   - 简历导入多行表.xlsx
   - 岗位需求明细表.xlsx

2. **后端处理流程**：
   - 后端服务接收Excel文件
   - 调用解析脚本将Excel转换为JSON
   - 直接调用LLM筛选模块进行筛选
   - 返回详细的筛选结果

3. **前端展示功能**：
   - 展示简历初筛结果列表
   - 显示详细的筛选条件和判断依据
   - 支持筛选、搜索、分页
   - 支持导出和批量操作

## 🚀 快速开始

### 方法一：一键启动（推荐）

```bash
./start.sh
```

### 方法二：手动启动

#### 1. 安装依赖

```bash
# 安装后端服务依赖（包含 LLM 筛选模块的依赖）
pip install -r requirements.txt

# 安装 LLM 筛选模块的依赖
cd ../../7.LLM_resume_filter
pip install -r requirements.txt
cd -
```

#### 2. 启动后端服务

```bash
python backend.py
```

服务将在 `http://127.0.0.1:8000` 启动

#### 3. 打开前端页面

在浏览器中打开 `index.html` 文件

或者使用Python启动一个简单的HTTP服务器：

```bash
# Python 3
python -m http.server 8080

# 然后访问 http://localhost:8080/index.html
```

## 📁 文件说明

- `backend.py` - FastAPI后端服务
- `index.html` - 前端界面
- `requirements.txt` - Python依赖包
- `detect_merged_cells_with_accuracy.py` - 简历文件解析脚本
- `detect_merged_cells_with_accuracy_position_adjust.py` - 岗位需求文件解析脚本

## 🔧 API接口

### 后端服务 (http://127.0.0.1:8000)

#### POST /api/screen

上传两个Excel文件进行简历初筛

**请求参数**：
- `resume_file`: 简历导入多行表Excel文件
- `position_file`: 岗位需求明细表Excel文件

**响应格式**：
```json
{
  "success": true,
  "message": "简历初筛完成",
  "data": [
    {
      "序号": 1,
      "姓名": "张三",
      "关键画像": "硕士 | 清华大学 | 985 | 30岁\n现任：软件开发工程师",
      "应聘岗位": "软件开发工程师",
      "AI初筛结果": "拟通过",
      "淘汰原因": "",
      "筛选条件详情": [
        {
          "筛选条件": "年龄要求",
          "是否通过": "通过",
          "判断方法": "规则",
          "原因说明": "年龄35岁，符合要求",
          "筛选详情": "..."
        }
      ]
    }
  ],
  "statistics": {
    "total": 10,
    "passed": 8,
    "rejected": 2,
    "elapsed_time": "12.34秒"
  }
}
```

#### GET /health

健康检查接口

#### GET /

系统信息接口

## 📝 使用说明

1. **上传文件**：
   - 点击"选择简历文件"按钮，选择 `（现RPA小工具流程）简历导入多行表.xlsx`
   - 点击"选择岗位需求文件"按钮，选择 `条件要求较简单的部分岗位岗位要求-模拟数据.xlsx`
   - 点击"开始处理"按钮

2. **查看结果**：
   - 处理完成后，结果会自动显示在表格中
   - 可以使用筛选条件进行筛选
   - 可以使用搜索框搜索候选人信息

3. **操作功能**：
   - **简历详情**：查看简历详细信息
   - **通过**：标记简历为通过
   - **淘汰**：标记简历为淘汰并输入原因
   - **导出**：导出当前筛选结果
   - **一键全部确认**：批量确认所有简历

## 🎯 筛选规则

本系统使用真实的LLM进行智能筛选，包含以下筛选条件：

### 规则筛选（Rule-based）
1. **年龄要求**：根据岗位要求检查候选人年龄
2. **学历要求**：检查学历层次和院校类型（985/211/双一流）
3. **工作年限**：检查系统内工作时长
4. **政治面貌**：检查是否符合岗位要求
5. **职称要求**：检查职称等级
6. **绩效要求**：检查近年绩效表现

### LLM智能筛选
1. **专业匹配**：使用LLM判断专业是否符合岗位要求
2. **工作经历匹配**：使用LLM分析工作经历是否符合要求

每个筛选条件都会返回详细的判断依据和原因说明。

## 🔍 技术栈

- **后端**：FastAPI, Python
- **前端**：HTML, CSS, JavaScript
- **Excel处理**：openpyxl

## 📌 注意事项

1. 确保后端服务已启动（`http://127.0.0.1:8000`）
2. 如果前端无法连接后端，检查CORS设置
3. 处理大文件时可能需要较长时间，请耐心等待
4. 结果会自动保存到 `简历初筛结果.json` 文件

## 🐛 故障排除

### 问题：前端无法连接后端

**解决方案**：
- 检查后端服务是否正在运行
- 检查 `backend.py` 中的 `API_BASE_URL` 是否正确
- 检查防火墙设置

### 问题：文件解析失败

**解决方案**：
- 确保Excel文件格式正确
- 检查文件是否包含必要的数据
- 查看后端控制台的错误信息

### 问题：导入模块失败

**解决方案**：
- 确保所有依赖已安装：`pip install -r requirements.txt`
- 确保两个解析脚本文件在同一目录下

## 📄 许可证

本项目仅供内部使用。
