# Windows EXE 打包说明

## 📋 打包前准备

### 1. 环境要求

- **操作系统**：Windows 10/11 (64位)
- **Python版本**：3.10 或更高版本
- **网络连接**：需要下载依赖包

### 2. 检查项目文件

确保以下文件存在：
- ✅ `backend.py` - 主程序文件
- ✅ `build_exe.spec` - PyInstaller配置文件
- ✅ `requirements.txt` - Python依赖列表
- ✅ `config.py` - 配置文件
- ✅ `index.html` - 前端页面
- ✅ `data/专业库.json` - 专业库数据
- ✅ `data/院校库.json` - 院校库数据

## 🚀 打包步骤

### 方法一：使用批处理脚本（推荐）

1. **双击运行** `build_exe.bat`
2. 等待打包完成（可能需要5-10分钟）
3. 打包完成后，在 `部署包/` 目录找到 `AI简历初筛系统.exe`

### 方法二：手动打包

```bash
# 1. 安装依赖
pip install -r requirements.txt
pip install pyinstaller

# 2. 执行打包
pyinstaller build_exe.spec --clean

# 3. 整理部署包
# 手动复制 dist/AI简历初筛系统.exe 到部署包目录
# 创建 data、output、logs 目录
```

## 📦 打包输出

打包完成后会生成：

```
dist/
└── AI简历初筛系统.exe    # 打包后的exe文件（约100-200MB）

部署包/                    # 整理后的部署包
├── AI简历初筛系统.exe
├── data/                  # 数据目录（用户文件）
├── output/                # 输出目录（筛选结果）
└── logs/                  # 日志目录
```

## ⚙️ 打包配置说明

### build_exe.spec 关键配置

- **单文件模式**：`--onefile`（已配置）
- **包含数据文件**：`data/` 目录和 `index.html`
- **隐藏导入**：所有必要的Python模块
- **控制台窗口**：`console=True`（显示日志）

### 资源文件处理

打包后的exe会自动处理资源路径：
- 数据文件：从临时目录读取（`sys._MEIPASS`）
- 用户文件：保存到exe所在目录的 `data/` 和 `output/` 文件夹

## 🔍 验证打包结果

### 1. 检查文件大小

exe文件应该在 100-200MB 左右（包含所有依赖）

### 2. 测试运行

1. 双击运行 `AI简历初筛系统.exe`
2. 检查控制台是否正常显示启动信息
3. 检查浏览器是否自动打开 `http://127.0.0.1:8000`
4. 测试上传文件功能

### 3. 检查目录

运行后应该自动创建：
- `data/` - 数据目录
- `output/` - 输出目录
- `logs/` - 日志目录

## ⚠️ 常见问题

### 1. 打包失败：找不到模块

**解决方法**：
- 检查 `hiddenimports` 列表是否包含所有模块
- 运行 `pip install -r requirements.txt` 确保所有依赖已安装

### 2. 打包后exe无法运行

**可能原因**：
- 缺少系统库（Visual C++ Redistributable）
- 杀毒软件拦截

**解决方法**：
- 安装 [Visual C++ Redistributable](https://aka.ms/vs/17/release/vc_redist.x64.exe)
- 将exe添加到杀毒软件白名单

### 3. 打包后找不到数据文件

**检查项**：
- `build_exe.spec` 中的 `datas` 配置是否正确
- `backend.py` 中的路径处理是否正确

### 4. exe文件太大

**优化方法**：
- 使用 `--exclude-module` 排除不需要的库
- 使用 `upx=True` 压缩（如果可用）
- 考虑使用 `--onedir` 模式（多文件模式）

## 📝 打包清单

打包前确认：

- [ ] Python 3.10+ 已安装
- [ ] 所有依赖已安装（`pip install -r requirements.txt`）
- [ ] PyInstaller 已安装（`pip install pyinstaller`）
- [ ] `build_exe.spec` 配置正确
- [ ] `backend.py` 已更新资源路径处理
- [ ] `data/` 目录包含必要的数据文件
- [ ] `index.html` 存在

打包后验证：

- [ ] exe文件生成成功
- [ ] exe文件可以正常启动
- [ ] 浏览器自动打开
- [ ] 可以上传文件
- [ ] 筛选功能正常
- [ ] 结果可以正常保存

## 🎯 部署建议

1. **测试环境**：先在本地Windows电脑测试
2. **杀毒软件**：提前添加到白名单
3. **用户说明**：提供 `部署包使用说明.md` 给最终用户
4. **版本管理**：建议在exe文件名中包含版本号

## 📚 相关文档

- `部署包使用说明.md` - 最终用户使用指南
- `build_exe.spec` - PyInstaller配置文件
- `build_exe.bat` - 自动打包脚本

---

**最后更新**：2026-01-20
